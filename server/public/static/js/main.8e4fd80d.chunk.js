(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},125:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(27),s=n.n(r),i=(n(67),n(5)),o=(n(68),n(69),n(132)),l=n(127),u=n(134),j=n(8),d=n(13),b=n(15),h=n.n(b),O=function e(){var t=this;Object(d.a)(this,e),this.signup=function(e,n,c){return t.instance.post("/signup",{username:e,password:n,email:c})},this.login=function(e,n,c){return t.instance.post("/login",{username:e,password:n,email:c})},this.logout=function(){return t.instance.get("/logout")},this.isloggedin=function(){return t.instance.post("/isloggedin")},this.instance=h.a.create({baseURL:"".concat("https://la-voz-de-las-palabras.herokuapp.com/api","/auth"),withCredentials:!0})},f=n(128),m=n(53),x=n(129),g=(n(89),n(0));var p=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(g.jsx)(l.a,{children:Object(g.jsxs)(f.a,{className:"mb-3 mt-4",children:[Object(g.jsx)(m.a,{onChange:function(e){return function(e){var t=e.target.value;a(t)}(e)},name:"searchValue",value:n,placeholder:"Search for title...","aria-label":"buscar"}),Object(g.jsx)(j.b,{to:"/lista-libros/".concat(n),children:Object(g.jsx)(x.a,{variant:"primary",type:"submit",children:"Buscar"})})]})})},v=(n(100),new O);function N(e){return Object(g.jsx)(o.a,{expand:"md",className:"mb-5",children:Object(g.jsxs)(l.a,{children:[Object(g.jsx)(o.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(g.jsx)(o.a.Collapse,{id:"basic-navbar-nav",children:Object(g.jsxs)(u.a,{className:"me-auto",children:[Object(g.jsx)(j.b,{className:"nav-link nav-title",to:"/",children:"LA VOZ DE LAS PALABRAS"}),e.loggedUser?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(j.b,{className:"nav-link",to:"/perfil",children:"Mi perfil"}),Object(g.jsx)("span",{className:"nav-link",onClick:function(){v.logout().then((function(t){return e.storeUser(null)})).catch((function(e){return console.log(e)}))},children:"Logout"})]}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(j.b,{className:"nav-link",to:"/registro",children:"Registro"}),Object(g.jsx)(j.b,{className:"nav-link",to:"/iniciar-sesion",children:"Iniciar sesi\xf3n"})]})]})}),Object(g.jsx)(o.a.Brand,{children:Object(g.jsx)(p,{})})]})})}var k=n(9),S=n(7),U=n(130),y=n(58),C=n(20),I=n.n(C),w=(n(101),function(e){return e<.5?Object(g.jsx)("div",{className:"rating",children:"\u2606\u2606\u2606\u2606\u2606"}):e>.5&&e<=1.5?Object(g.jsx)("div",{className:"rating",children:"\u2605\u2606\u2606\u2606\u2606"}):e>1.5&&e<=2.5?Object(g.jsx)("div",{className:"rating",children:"\u2605\u2605\u2606\u2606\u2606"}):e>2.5&&e<=3.5?Object(g.jsx)("div",{className:"rating",children:"\u2605\u2605\u2605\u2606\u2606"}):e>3.5&&e<=4.5?Object(g.jsx)("div",{className:"rating",children:"\u2605\u2605\u2605\u2605\u2606"}):e>4.5&&e<=5?Object(g.jsx)("div",{className:"rating",children:"\u2605\u2605\u2605\u2605\u2605"}):void 0}),F=function(e){var t=e.slice(0,300),n=t.split("").reverse().findIndex((function(e){return" "===e}));return t.slice(0,-n)+'..."'};n(102);var A=function(e){var t=e.text,n=e.rate;return e._id,Object(g.jsxs)(y.a,{className:"comment-item",children:[Object(g.jsx)("article",{children:t}),Object(g.jsx)(g.Fragment,{children:n?w(n):Object(g.jsx)("p",{children:"Sin puntuacion"})})]})};var L=function(e){var t=Object(c.useState)(null),n=Object(i.a)(t,2),a=n[0],r=n[1];return Object(c.useEffect)((function(){r(e.comments)}),[]),Object(g.jsx)(l.a,{children:Object(g.jsx)(U.a,{children:a?a.map((function(e,t){return Object(g.jsx)(A,Object(k.a)({},e),"".concat(e._id,"--").concat(t))})):Object(g.jsx)("p",{children:"Cargando..."})})})},B=function e(){var t=this;Object(d.a)(this,e),this.getAudios=function(){return t.instance.get("/")},this.getAudiosNotValidated=function(){return t.instance.get("/validated")},this.getAudiosByFragment=function(e){return t.instance.get("/by-fragment/".concat(e))},this.getOneAudio=function(e){return t.instance.get("/".concat(e))},this.createAudio=function(e,n,c){return t.instance.post("/",{audioFile:e,fragment:n,userId:c})},this.deleteAudio=function(e){return t.instance.delete("/".concat(e))},this.updateAudio=function(e){return t.instance.put("/".concat(e))},this.updateAudioRate=function(e,n){return t.instance.put("/rate/".concat(e),{rate:n})},this.instance=h.a.create({baseURL:"".concat("https://la-voz-de-las-palabras.herokuapp.com/api","/audio"),withCredentials:!0})},_=(n(103),new B);var E=function(){var e=Object(S.h)().id,t=Object(c.useState)(null),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(null),o=Object(i.a)(s,2),u=o[0],d=o[1],b=Object(c.useState)(0),h=Object(i.a)(b,2),O=h[0],f=h[1];Object(c.useEffect)((function(){_.getOneAudio(e).then((function(e){return r(e.data.audio),_.updateAudioRate(e.data.audio._id,O)})).then((function(e){var t=e.data.audio.comments.filter((function(e){return!0===e.isValidated}));d(t),m(t)})).catch((function(e){return console.error(e)}))}),[O]);var m=function(e){var t=0;e.map((function(e){return t+=e.rate}));var n=t/e.length;f(n)};return a?Object(g.jsxs)(l.a,{children:[Object(g.jsxs)("h3",{children:["Audio de ",a.book.name]}),Object(g.jsxs)("p",{className:"text-fragment",children:["Del fragmento: ",a.fragment.content]}),Object(g.jsxs)(U.a,{children:[Object(g.jsxs)(y.a,{md:4,children:[Object(g.jsx)(I.a,{src:"".concat(a.audioFile),autoPlay:!1,controls:!0}),Object(g.jsxs)("p",{children:["Valoracion del Audio: ",O?w(O):Object(g.jsx)("p",{children:"Sin puntuacion"})]})]}),Object(g.jsx)(y.a,{md:8,children:(null===u||void 0===u?void 0:u.length)>0?Object(g.jsx)(L,{comments:u}):Object(g.jsx)("p",{children:"No hay comentarios aun"})})]}),Object(g.jsx)(j.b,{to:"/crear-comentario/".concat(a._id),children:Object(g.jsx)(x.a,{children:"Da tu opinion sobre este audio"})}),Object(g.jsx)(j.b,{to:"/audios",children:Object(g.jsx)(x.a,{children:"Volver a la lista de audios"})})]}):Object(g.jsx)("p",{children:"Cargando..."})},V=n(133),D=new function e(){var t=this;Object(d.a)(this,e),this.uploadAudio=function(e){return t.instance.post("/audio",e)},this.instance=h.a.create({baseURL:"".concat("https://la-voz-de-las-palabras.herokuapp.com/api","/upload"),withCredentials:!0})},P=new B;var R=function(e){var t=e.loggedUser,n=Object(c.useState)(""),a=Object(i.a)(n,2),r=a[0],s=a[1],o=Object(c.useState)(""),l=Object(i.a)(o,2),u=l[0],d=l[1],b=Object(c.useState)(""),h=Object(i.a)(b,2),O=h[0],f=h[1],m=Object(c.useState)(null),p=Object(i.a)(m,2),v=p[0],N=p[1],k=Object(S.h)().fragmentId,U=Object(S.g)();return Object(c.useEffect)((function(){f(t._id),s(k)}),[]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(V.a,{onSubmit:function(e){e.preventDefault(),P.createAudio({fragment:r,audioFile:u,userId:O}).then((function(){U.push("/fragmentos/".concat(r))}))},children:[Object(g.jsxs)(V.a.Group,{className:"mb-3",controlId:"audioFile",children:[Object(g.jsx)(V.a.Label,{children:"Archivo de audio: "}),Object(g.jsx)(V.a.Control,{onChange:function(e){return function(e){N(!0);var t=new FormData;t.append("audioData",e.target.files[0]),D.uploadAudio(t).then((function(e){N(!1),d(e.data.fileUrl)})).catch((function(e){return alert("Error, no se ha subido el audio")}))}(e)},name:"audioFile",type:"file"})]}),v&&Object(g.jsx)("p",{children:"Subiendo archivo"}),Object(g.jsx)(x.a,{disabled:v,variant:"primary",type:"submit",children:v?"Loading...":"Submit"})]}),Object(g.jsx)(j.b,{to:"/fragmentos/".concat(r),children:Object(g.jsx)(x.a,{children:"Volver a libros"})})]})},z=function e(){var t=this;Object(d.a)(this,e),this.getUsers=function(){return t.instance.get("/")},this.getOneUser=function(e){return t.instance.get("/".concat(e))},this.createUser=function(e){return t.instance.post("/",e)},this.deleteUser=function(e){return t.instance.delete("/".concat(e))},this.addAudiosFav=function(e,n){return t.instance.put("/add-fav-audios",{audioId:e,userId:n})},this.instance=h.a.create({baseURL:"".concat("https://la-voz-de-las-palabras.herokuapp.com/api","/user")})},q=(n(104),new z);var M=function(e){var t,n=e.rate,c=e.audioFile,a=e._id,r=e.loggedUser,s=e.storeUser,i=function(e,t){return t.includes(e)};return t=r?i(a,r?r.favAudios:[]):null,Object(g.jsxs)(y.a,{md:6,children:[Object(g.jsx)(I.a,{src:"".concat(c),autoPlay:!1,controls:!0}),Object(g.jsx)(g.Fragment,{children:n?w(n):Object(g.jsx)("div",{className:"rating",children:"\u2606\u2606\u2606\u2606\u2606"})}),r&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(j.b,{to:"/audios/".concat(a),children:Object(g.jsx)(x.a,{children:"Detalles"})}),Object(g.jsx)("form",{onSubmit:function(e){e.preventDefault();var n={audioId:a,userId:r._id};q.addAudiosFav(n.audioId,n.userId).then((function(e){s(e.data.user)})).catch((function(e){return console.log(e)})),t=i(a,r.favAudios)},children:Object(g.jsx)(x.a,{type:"submit",children:t?"Eliminar de Fav":"A\xf1adir a favoritos"})})]})]})},G=(n(105),new B);var T=function(e){var t=Object(c.useState)(null),n=Object(i.a)(t,2),a=n[0],r=n[1];Object(c.useEffect)((function(){G.getAudios().then((function(e){s(e.data)})).catch((function(e){return console.log(e)}))}),[]);var s=function(e){r(e.sort((function(e,t){return t.rate-e.rate})))};return Object(g.jsxs)(l.a,{className:"border",children:[Object(g.jsxs)(U.a,{children:[Object(g.jsx)(y.a,{md:12,children:Object(g.jsx)("h2",{children:"Los mejores audios"})}),a?a.map((function(t,n){return e?Object(c.createElement)(M,Object(k.a)(Object(k.a)({},t),{},{loggedUser:null===e||void 0===e?void 0:e.loggedUser,storeUser:null===e||void 0===e?void 0:e.storeUser,key:"".concat(n,"-").concat(null===t||void 0===t?void 0:t._id)})):Object(c.createElement)(M,Object(k.a)(Object(k.a)({},t),{},{key:"".concat(n,"-").concat(null===t||void 0===t?void 0:t._id)}))})):Object(g.jsx)("p",{children:"Cargando..."})]}),Object(g.jsx)("hr",{}),!e.loggedUser&&Object(g.jsx)("h5",{children:" Inicia sesion para poder comentar "})]})},J=function e(){var t=this;Object(d.a)(this,e),this.getBooks=function(){return t.instance.get("/")},this.getOneBook=function(e){return t.instance.get("/".concat(e))},this.createBook=function(e){return t.instance.post("/create",e)},this.instance=h.a.create({baseURL:"".concat("https://la-voz-de-las-palabras.herokuapp.com/api","/book"),withCredentials:!0})},H=function e(){var t=this;Object(d.a)(this,e),this.getBooks=function(e){return t.instance.get("/search-book/".concat(e))},this.getBooksByType=function(e,n){return t.instance.get("/search-book-by/".concat(e,"/").concat(n))},this.getOneBook=function(e){return t.instance.get("/get-book/".concat(e))},this.instance=h.a.create({baseURL:"".concat("https://la-voz-de-las-palabras.herokuapp.com/api","/apibook"),withCredentials:!0})},Z=new H,K=new J;var Q=function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=(t[0],t[1]),a=Object(c.useState)(null),r=Object(i.a)(a,2),s=r[0],o=r[1],u=Object(S.h)().id;Object(c.useEffect)((function(){d()}),[]);var d=function(){return Z.getOneBook(u).then((function(e){var t={};if(e.data.length>1){var n=e.data.filter((function(e){return e.id===u}));t=Object(k.a)({},n[0])}else t=Object(k.a)({},e.data[0]);o(t),b()})).catch((function(e){return console.error(e)}))},b=function(){var e,t={bookIdApi:null===s||void 0===s?void 0:s.id,name:null===s||void 0===s||null===(e=s.volumeInfo)||void 0===e?void 0:e.title};K.createBook(t).then((function(e){return n(e)})).catch((function(e){return console.error(e)}))};return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(l.a,{children:s?Object(g.jsxs)(U.a,{children:[Object(g.jsxs)(y.a,{children:[Object(g.jsx)("h3",{children:s.volumeInfo.title}),s.volumeInfo.description?Object(g.jsx)("p",{children:s.volumeInfo.description}):Object(g.jsx)("p",{children:"No hay descripcion"}),Object(g.jsx)("p",{children:s.volumeInfo.authors[0]}),Object(g.jsxs)("h4",{children:["Paginas: ",s.volumeInfo.pageCount]})]}),Object(g.jsx)(j.b,{to:"/crear-fragmento/".concat(s.id),children:Object(g.jsx)(x.a,{variant:"primary",children:"A\xf1ade otro fragmento"})}),Object(g.jsx)(j.b,{to:"/",children:Object(g.jsx)(x.a,{children:"volver"})})]}):Object(g.jsx)("h3",{children:"Cargando..."})})})},W=n(131),X=new H;var Y=function(e){var t=Object(c.useState)(null),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(S.h)().text;Object(c.useEffect)((function(){o()}),[]);var o=function(){X.getBooks(s).then((function(e){r(e.data)})).catch((function(e){return console.error(e)}))};return Object(g.jsx)(l.a,{children:Object(g.jsxs)(U.a,{children:[a&&a?a.map((function(e,t){var n;return Object(g.jsxs)(y.a,{md:6,children:[Object(g.jsx)("h3",{children:e.volumeInfo.title}),Object(g.jsx)(W.a,{src:(null===(n=e.volumeInfo.imageLinks)||void 0===n?void 0:n.thumbnail)?e.volumeInfo.imageLinks.thumbnail:"https://www.esferalibros.com/assets/corporativa/images/portada_no_disponible.png"}),e.volumeInfo.description?Object(g.jsx)("p",{children:e.volumeInfo.description}):Object(g.jsx)("p",{children:"No hay descripcion"}),e.volumeInfo.authors?e.volumeInfo.authors.map((function(e){return Object(g.jsxs)("h4",{children:[" - ",e," - "]})})):Object(g.jsx)("p",{children:"Sin autores conocidos"}),Object(g.jsxs)("h4",{children:["Paginas: ",e.volumeInfo.pageCount]}),Object(g.jsx)(j.b,{to:"/detalles/".concat(e.id),children:Object(g.jsx)(x.a,{children:"Mostrar Detalles del libro"})}),Object(g.jsx)("hr",{})]},"".concat(t,"-").concat(e.volumeInfo.title,"-").concat(e.volumeInfo.pageCount))})):Object(g.jsx)("p",{children:"Cargando..."}),Object(g.jsx)("hr",{})]})})},$=n(36),ee=function e(){var t=this;Object(d.a)(this,e),this.getFragments=function(){return t.instance.get("/")},this.getFragmentsNotValidated=function(){return t.instance.get("/validated")},this.getOneFragment=function(e){return t.instance.get("/".concat(e))},this.createFragment=function(e){return t.instance.post("/",e)},this.deleteFragment=function(e){return t.instance.delete("/".concat(e))},this.updateFragment=function(e){return t.instance.put("/".concat(e))},this.instance=h.a.create({baseURL:"".concat("https://la-voz-de-las-palabras.herokuapp.com/api","/fragment")})},te=n(135);n(106);var ne=function(e){var t=e._id,n=e.content,c=(e.bookName,F(n));return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(te.a,{className:"fragment-item",children:Object(g.jsx)(te.a.Title,{className:"content",children:c})}),Object(g.jsx)(j.b,{to:"/crear-audio/".concat(t),children:Object(g.jsx)(x.a,{variant:"primary",children:"Subir audio de este fragmento"})}),Object(g.jsx)(j.b,{to:"/fragmentos/".concat(t),children:Object(g.jsx)(x.a,{children:"Audios del Fragmento"})})]})},ce=(n(107),new ee);var ae=function(e){var t=e.book,n=Object(c.useState)(null),a=Object(i.a)(n,2),r=a[0],s=a[1];Object(c.useEffect)((function(){ce.getFragments().then((function(e){s(e.data),o(e.data,t._id)})).catch((function(e){return console.log(e)}))}),[]);var o=function(e,t){var n=Object($.a)(e);s(n.filter((function(e){return e.bookId.includes(t)})))};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("h2",{className:"title-fragments",children:['Fragmentos del libro "',t.name,'"']}),Object(g.jsx)(l.a,{className:"list-fragments",children:Object(g.jsx)(U.a,{children:r?r.map((function(e,n){return Object(g.jsx)(y.a,{md:6,children:Object(g.jsx)(ne,Object(k.a)(Object(k.a)({},e),{},{bookName:t.name}))},"".concat(n,"-").concat(null===e||void 0===e?void 0:e._id))})):Object(g.jsx)("p",{children:"Cargando..."})})})]})},re=(n(108),new J);var se=function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(S.h)().id;return Object(c.useEffect)((function(){re.getOneBook(r).then((function(e){a(e.data.book)})).catch((function(e){return console.error(e)}))}),[]),Object(g.jsx)(l.a,{className:"book-details",children:n?Object(g.jsxs)(U.a,{children:[Object(g.jsx)(y.a,{children:Object(g.jsx)(ae,{book:n})}),Object(g.jsx)(j.b,{className:"button-details",to:"/crear-fragmento/".concat(n._id),children:Object(g.jsx)(x.a,{variant:"primary",children:"A\xf1ade otro fragmento"})}),Object(g.jsx)(j.b,{className:"button-details2",to:"/",children:Object(g.jsx)(x.a,{children:"volver"})})]}):Object(g.jsx)("h3",{children:"Cargando el libro..."})})};n(109);var ie=function(e){var t=Object(c.useState)(null),n=Object(i.a)(t,2),a=n[0],r=n[1];return Object(c.useEffect)((function(){a!==e.book&&r(e.book)}),[]),console.log(a),a?Object(g.jsx)(y.a,{md:6,lg:4,children:Object(g.jsxs)(te.a,{className:"book-item",children:[Object(g.jsx)(te.a.Title,{className:"card-title",children:null===a||void 0===a?void 0:a.name}),Object(g.jsxs)(te.a.Body,{children:[a.fragments.map((function(e){return e.isValidated&&Object(g.jsx)("p",{children:F(e.content)})})),e.loggedUser&&Object(g.jsx)(j.b,{to:"/libros/".concat(null===a||void 0===a?void 0:a._id),children:Object(g.jsx)(x.a,{children:"Detalles"})})]})]})},"".concat(a._id,"-").concat(e.idx)):Object(g.jsx)("p",{children:"Cargando..."})},oe=(n(110),new J);var le=function(e){var t=Object(c.useState)(null),n=Object(i.a)(t,2),a=n[0],r=n[1];Object(c.useEffect)((function(){oe.getBooks().then((function(e){s(e.data)})).catch((function(e){return console.log(e)}))}),[]);var s=function(e){r(e.sort((function(e,t){return t.fragments.length-e.fragments.length})))};return Object(g.jsxs)(l.a,{className:"",children:[Object(g.jsx)("h2",{className:"list-title",children:"Listado de Libros"}),Object(g.jsx)(U.a,{className:"list",children:a?a.map((function(t,n){return Object(g.jsx)(ie,{book:t,idx:n,loggedUser:e.loggedUser},"".concat(n,"-").concat(t._id))})):Object(g.jsx)("p",{children:"Cargando..."})}),!e.loggedUser&&Object(g.jsx)("h5",{className:"login",children:"Inicia sesion para subir audios de los fragmentos que tu quieras"})]})},ue=function e(){var t=this;Object(d.a)(this,e),this.getComments=function(){return t.instance.get("/")},this.getCommentsNotValidated=function(){return t.instance.get("/validated")},this.getCommentsByUser=function(e){return t.instance.get("/by-user",e)},this.createComment=function(e){return t.instance.post("/",e)},this.deleteComment=function(e){return t.instance.delete("/".concat(e))},this.updateComment=function(e){return t.instance.put("/".concat(e))},this.instance=h.a.create({baseURL:"".concat("https://la-voz-de-las-palabras.herokuapp.com/api","/comment")})},je=n(61),de=(n(111),new ue);var be=function(e){var t=Object(c.useState)(""),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(""),o=Object(i.a)(s,2),l=o[0],u=o[1],j=Object(c.useState)(""),d=Object(i.a)(j,2),b=d[0],h=d[1],O=Object(c.useState)(null),f=Object(i.a)(O,2),m=f[0],p=f[1],v=Object(c.useState)(null),N=Object(i.a)(v,2),k=N[0],U=N[1],y=Object(S.g)(),C=Object(S.h)().audioIdParams;Object(c.useEffect)((function(){var t=e.loggedUser._id;h(C),u(t)}),[]);var I=function(e){var t=e.target,n=t.name,c=t.value;"rate"===n?p(c):"hover"===n?U(c):"text"===n&&r(c)};return Object(g.jsxs)(V.a,{onSubmit:function(e){e.preventDefault(),de.createComment({text:a,user:l,audioId:b,rate:m}).then((function(){y.push("/audios/".concat(b))})).catch((function(e){return console.error(e)}))},children:[Object(g.jsx)("h2",{children:"Valora el audio "}),Object($.a)(Array(5)).map((function(e,t){var n=t+1;return Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{id:"starRadio",type:"radio",name:"rate",value:n,onClick:function(e){return I(e)}}),Object(g.jsx)(je.a,{className:"star",color:n<=(k||m)?"#ffc107":"#e4e5e9",size:30,onMouseEnter:function(){return p(n)},onMouseLeave:function(){return U(null)}})]},t)})),Object(g.jsxs)(V.a.Group,{className:"mb-3",controlId:"text",children:[Object(g.jsx)(V.a.Label,{children:Object(g.jsx)("h4",{children:"Comentario: "})}),Object(g.jsx)(V.a.Control,{onChange:function(e){return I(e)},name:"text",value:a,type:"text",placeholder:"Deja tu comentario"})]}),Object(g.jsx)(x.a,{variant:"primary",type:"submit",children:"Submit"})]})},he=(n(112),n(1)),Oe=he.useState,fe=he.useEffect,me=new ee,xe=new J,ge=new B;var pe=function(){var e=Object(S.h)().id,t=Oe(null),n=Object(i.a)(t,2),c=n[0],a=n[1],r=Oe(null),s=Object(i.a)(r,2),o=s[0],u=s[1],d=Oe(null),b=Object(i.a)(d,2),h=b[0],O=b[1];fe((function(){f()}),[]);var f=function(){me.getOneFragment(e).then((function(e){return a(e.data.fragment),m(e.data.fragment),xe.getOneBook(e.data.fragment.bookId)})).then((function(e){u(e.data.book)})).catch((function(e){return console.error(e)}))},m=function(e){ge.getAudiosByFragment(e._id).then((function(e){return O(e.data)})).catch((function(e){return console.error(e)}))};return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(l.a,{children:[c&&Object(g.jsx)(U.a,{children:Object(g.jsxs)(y.a,{children:[Object(g.jsx)("h3",{className:"fragment-content",children:c.content}),Object(g.jsxs)("p",{className:"fragment-content-p",children:["Este fragmento es del Libro: ",null===o||void 0===o?void 0:o.name]})]})}),Object(g.jsx)(U.a,{children:h?h.map((function(e,t){return Object(g.jsxs)(y.a,{children:[Object(g.jsx)(I.a,{src:"".concat(e.audioFile),autoPlay:!1,controls:!0}),Object(g.jsx)(j.b,{to:"/audios/".concat(e._id),children:Object(g.jsx)(x.a,{children:"Comentarios del audio"})})]},"".concat(t,"-").concat(e._id))})):Object(g.jsx)("p",{children:"Cargando lista de audios..."})}),Object(g.jsx)(j.b,{to:"/libros/".concat(null===c||void 0===c?void 0:c.bookId),children:Object(g.jsx)(x.a,{children:"Volver a libros"})}),Object(g.jsx)(j.b,{to:"/crear-audio/".concat(null===c||void 0===c?void 0:c._id),children:Object(g.jsx)(x.a,{children:"Subir audio de este fragmento"})})]})})},ve=new ee;var Ne=function(e){var t=Object(c.useState)(""),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(""),o=Object(i.a)(s,2),l=o[0],u=o[1],j=Object(S.g)();console.log("soy un clg del useparams del form de fragment",Object(S.h)());var d=Object(S.h)().bookIdParams;return Object(c.useEffect)((function(){u(d)}),[]),Object(g.jsxs)(V.a,{onSubmit:function(e){e.preventDefault(),ve.createFragment({bookId:l,content:a}).then((function(){j.push("/libros")})).catch((function(e){return console.log(e)}))},children:[Object(g.jsxs)(V.a.Group,{className:"mb-3",controlId:"content",children:[Object(g.jsx)(V.a.Label,{children:"Fragmento: "}),Object(g.jsx)(V.a.Control,{onChange:function(e){return function(e){var t=e.target,n=t.name,c=t.value;"content"===n&&r(c)}(e)},name:"content",value:a,type:"text",placeholder:"Introduce aqui el fragmento que vas a leer"})]}),Object(g.jsx)(x.a,{variant:"primary",type:"submit",children:"Submit"})]})};n(113);var ke=function(e){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(l.a,{style:{minHeight:"100vh"},children:[Object(g.jsx)("h1",{children:"Bienvenid@ a La Voz de las Palabras"}),Object(g.jsxs)(U.a,{className:"homepage",children:[Object(g.jsx)(y.a,{className:"bloques",children:Object(g.jsx)(j.b,{to:"/libros",children:Object(g.jsx)(x.a,{children:"Ver libros"})})}),Object(g.jsx)(y.a,{className:"bloques",children:Object(g.jsx)(j.b,{to:"/audios",children:Object(g.jsx)(x.a,{children:"Ver audios"})})})]}),Object(g.jsx)("br",{}),e.loggedUser?Object(g.jsx)("div",{className:"homepage3",children:Object(g.jsx)(j.b,{to:"/perfil",children:Object(g.jsx)(x.a,{children:"Mi perfil"})})}):Object(g.jsxs)(U.a,{children:[Object(g.jsx)(y.a,{className:"homepage2",children:Object(g.jsx)(j.b,{to:"/registro",children:Object(g.jsx)(x.a,{children:"Registrate"})})}),Object(g.jsx)(y.a,{className:"homepage2",children:Object(g.jsx)(j.b,{to:"/iniciar-sesion",children:Object(g.jsx)(x.a,{children:"Inicia Sesion"})})})]})]}),Object(g.jsx)(le,{loggedUser:e.loggedUser}),Object(g.jsx)(T,{loggedUser:e.loggedUser,storeUser:e.storeUser}),Object(g.jsx)("div",{className:"margin-footer"})]})},Se=(n(114),new O);var Ue=function(e){var t=Object(c.useState)(""),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(""),o=Object(i.a)(s,2),u=o[0],j=o[1],d=Object(S.g)(),b=function(e){var t=e.target,n=t.name,c=t.value;"username"===n?r(c):"pwd"===n&&j(c)};return Object(g.jsx)(l.a,{className:"login-text",children:Object(g.jsxs)(V.a,{onSubmit:function(t){t.preventDefault(),Se.login(a,u).then((function(t){e.storeUser(t.data),d.push("/")})).catch((function(e){return console.log(e)}))},children:[Object(g.jsxs)(V.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(g.jsx)(V.a.Label,{classname:"",children:"Username"}),Object(g.jsx)(V.a.Control,{name:"username",value:a,onChange:b,type:"text",placeholder:"Enter username"})]}),Object(g.jsxs)(V.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(g.jsx)(V.a.Label,{classname:"",children:"Password"}),Object(g.jsx)(V.a.Control,{name:"pwd",value:u,onChange:b,type:"password",placeholder:"Password"})]}),Object(g.jsx)(x.a,{className:"darkness",variant:"primary",type:"submit",children:"Submit"})]})})},ye=new z;var Ce=function(e){var t=Object(c.useState)(null),n=Object(i.a)(t,2),a=n[0],r=n[1];Object(c.useEffect)((function(){s()}),[]);var s=function(){ye.getOneUser(e.loggedUser._id).then((function(e){r(e.data.user)})).catch((function(e){return console.log(e)}))};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(U.a,{children:[Object(g.jsx)("h3",{children:"Lista de mis audios"}),Object(g.jsx)("hr",{}),a?a?a.myAudios.map((function(t,n){return Object(g.jsxs)(y.a,{md:6,children:[Object(g.jsx)(I.a,{src:"".concat(t.audioFile),autoPlay:!1,controls:!0}),e.loggedUser&&Object(g.jsx)(j.b,{to:"/audios/".concat(t._id),children:Object(g.jsx)(x.a,{children:"Detalles"})})]},"".concat(t._id,"-").concat(n))})):Object(g.jsx)("p",{children:"Cargando usuario"}):Object(g.jsx)("p",{children:"Cargando audios..."})]}),Object(g.jsxs)(U.a,{children:[Object(g.jsx)("h3",{children:"Lista de mis audios favoritos"}),Object(g.jsx)("hr",{}),a?a?a.favAudios.map((function(e){return Object(g.jsxs)(y.a,{md:6,children:[Object(g.jsx)(I.a,{src:"".concat(e.audioFile),autoPlay:!1,controls:!0}),Object(g.jsx)(j.b,{to:"/audios/".concat(e._id),children:Object(g.jsx)(x.a,{children:"Detalles"})})]})})):Object(g.jsx)("p",{children:"Cargando usuario"}):Object(g.jsx)("p",{children:"Cargando audios..."})]})]})};var Ie=function(e){var t=new ee,n=function(n){n.preventDefault();var c=n.target.querySelector("button").value;t.updateFragment(c).then((function(){e.getNotValidated()})).catch((function(e){return console.log(e)}))};return Object(g.jsxs)(U.a,{children:[Object(g.jsx)("h3",{children:"Lista de Fragmentos a validar"}),e.fragments?e.fragments.map((function(e,t){return Object(g.jsx)(y.a,{lg:4,md:6,children:Object(g.jsxs)("div",{className:"validated-items",children:[Object(g.jsxs)("p",{children:["-",e.content,"-"]}),Object(g.jsx)(V.a,{onSubmit:n,children:Object(g.jsx)(x.a,{type:"submit",value:e._id,children:"Validar"})})]})},"".concat(t,"-").concat(e._id))})):Object(g.jsx)("p",{children:"cargando fragmentos..."})]})};var we=function(e){var t=new ue,n=function(n){n.preventDefault();var c=n.target.querySelector("button").value;t.updateComment(c).then((function(){e.getNotValidated()})).catch((function(e){return console.log(e)}))};return Object(g.jsxs)(U.a,{children:[Object(g.jsx)("h3",{children:"Lista de comentarios a validar"}),e.comments?e.comments.map((function(e,t){return Object(g.jsx)(y.a,{lg:3,md:6,children:Object(g.jsxs)("div",{className:"validated-items",children:[Object(g.jsxs)("p",{children:["-",e.text,"-"]}),Object(g.jsx)(V.a,{onSubmit:n,children:Object(g.jsx)(x.a,{type:"submit",value:e._id,children:"Validar"})})]})},"".concat(t,"-").concat(e._id))})):Object(g.jsx)("p",{children:"cargando comentarios..."})]})};n(115);var Fe=function(e){var t=new B,n=function(n){n.preventDefault();var c=n.target.querySelector("button").value;t.updateAudio(c).then((function(){e.getNotValidated()})).catch((function(e){return console.log(e)}))};return Object(g.jsxs)(U.a,{className:"center",children:[Object(g.jsx)("h3",{children:"Lista de audios a validar"}),e.audios?e.audios.map((function(e,t){return Object(g.jsxs)(y.a,{className:"",lg:4,md:6,children:[Object(g.jsx)(I.a,{src:"".concat(e.audioFile),autoPlay:!1,controls:!0}),Object(g.jsx)(V.a,{onSubmit:n,children:Object(g.jsx)(x.a,{type:"submit",value:e._id,children:"Validar"})})]},e._id+t)})):Object(g.jsx)("p",{children:"cargando audios..."})]})},Ae=(n(116),new ee),Le=new B,Be=new ue;var _e=function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(null),s=Object(i.a)(r,2),o=s[0],l=s[1],u=Object(c.useState)(null),j=Object(i.a)(u,2),d=j[0],b=j[1];Object(c.useEffect)((function(){h()}),[]);var h=function(){var e=[Ae.getFragmentsNotValidated(),Le.getAudiosNotValidated(),Be.getCommentsNotValidated()];Promise.all(e).then((function(e){var t=Object(i.a)(e,3),n=t[0],c=t[1],r=t[2];a(n.data),l(c.data),b(r.data)})).catch((function(e){return console.log(e)}))};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(Ie,{fragments:n,getNotValidated:function(){return h()}}),Object(g.jsx)(we,{comments:d,getNotValidated:function(){return h()}}),Object(g.jsx)(Fe,{audios:o,getNotValidated:function(){return h()}})]})},Ee=(n(117),function(e){var t=e.loggedUser,n=e.storeUser;return Object(g.jsxs)(l.a,{children:[Object(g.jsxs)("h1",{children:["\xa1Bienvenid@, ","ADMIN"===t.role?"Administrador":t.username,"!"]}),"ADMIN"===t.role?Object(g.jsx)(_e,{loggedUser:t}):Object(g.jsxs)("div",{children:[Object(g.jsx)("h3",{children:"Aqui van las listas de mis audios y los audios fav:"}),Object(g.jsx)(Ce,{loggedUser:t,storeUser:n})]})]})}),Ve=n(59),De=n(62),Pe=n(60),Re=function(e){Object(De.a)(n,e);var t=Object(Pe.a)(n);function n(e){var c;return Object(d.a)(this,n),(c=t.call(this,e)).apibookService=new H,c.componentDidUpdate=function(e,t){e.match.params.text!==c.props.match.params.text&&c.getBooks()},c.displayBooks=function(){return c.state.libros?c.state.libros.map((function(e){return Object(g.jsxs)(y.a,{md:6,children:[Object(g.jsx)("h3",{children:e.volumeInfo.title}),e.volumeInfo.description?Object(g.jsx)("p",{children:e.volumeInfo.description}):Object(g.jsx)("p",{children:"Sin descripcion"}),e.volumeInfo.pageCount?Object(g.jsxs)("h4",{children:["Paginas: ",e.volumeInfo.pageCount]}):Object(g.jsx)(g.Fragment,{children:" "}),Object(g.jsx)(j.b,{children:Object(g.jsx)(x.a,{children:"hara cosas, como llevarte a narnia"})}),Object(g.jsx)("hr",{})]})})):Object(g.jsx)("p",{children:"Cargando..."})},c.state={libros:null},c}return Object(Ve.a)(n,[{key:"componentDidMount",value:function(){this.getBooks()}},{key:"getBooks",value:function(){var e=this,t=this.props.match.params.text;this.apibookService.getBooks(t).then((function(t){e.setState(Object(k.a)(Object(k.a)({},e.state),{},{libros:t.data}))})).catch((function(e){return console.error(e)}))}},{key:"render",value:function(){return Object(g.jsx)(l.a,{children:Object(g.jsxs)(U.a,{children:[this.state.libros?this.displayBooks():Object(g.jsx)("p",{children:"cargando..."}),Object(g.jsx)("hr",{})]})})}}]),n}(c.Component),ze=(n(118),new O);var qe=function(e){var t=Object(c.useState)(""),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(""),o=Object(i.a)(s,2),u=o[0],j=o[1],d=Object(c.useState)(""),b=Object(i.a)(d,2),h=b[0],O=b[1],f=Object(S.g)(),m=function(e){var t=e.target,n=t.name,c=t.value;"username"===n?r(c):"password"===n?j(c):"email"===n&&O(c)};return Object(g.jsx)(l.a,{className:"signup-text",children:Object(g.jsxs)(V.a,{onSubmit:function(e){e.preventDefault(),ze.signup(a,u,h).then((function(e){return f.push("/")})).catch((function(e){return console.log(e)}))},children:[Object(g.jsxs)(V.a.Group,{className:"mb-3",controlId:"formBasicName",children:[Object(g.jsx)(V.a.Label,{children:"Username"}),Object(g.jsx)(V.a.Control,{name:"username",value:a,onChange:m,type:"text",placeholder:"Enter username"})]}),Object(g.jsxs)(V.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(g.jsx)(V.a.Label,{children:"Email"}),Object(g.jsx)(V.a.Control,{name:"email",value:h,onChange:m,type:"text",placeholder:"Email"})]}),Object(g.jsxs)(V.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(g.jsx)(V.a.Label,{children:"Password"}),Object(g.jsx)(V.a.Control,{name:"password",value:u,onChange:m,type:"password",placeholder:"Password"})]}),Object(g.jsx)(x.a,{variant:"primary",type:"submit",children:"Submit"})]})})},Me=function(e){var t=e.storeUser,n=e.loggedUser;return Object(g.jsxs)(S.d,{children:[Object(g.jsx)(S.b,{exact:!0,path:"/",render:function(){return Object(g.jsx)(ke,{loggedUser:n,storeUser:t})}}),Object(g.jsx)(S.b,{exact:!0,path:"/libros",render:function(){return Object(g.jsx)(le,{loggedUser:n})}}),Object(g.jsx)(S.b,{exact:!0,path:"/audios",render:function(){return Object(g.jsx)(T,{loggedUser:n,storeUser:t})}}),Object(g.jsx)(S.b,{exact:!0,path:"/registro",render:function(e){return Object(g.jsx)(qe,Object(k.a)({},e))}}),Object(g.jsx)(S.b,{exact:!0,path:"/iniciar-sesion",render:function(e){return Object(g.jsx)(Ue,Object(k.a)({storeUser:t},e))}}),Object(g.jsx)(S.b,{path:"/lista-libros/:text",render:function(e){return Object(g.jsx)(Y,Object(k.a)(Object(k.a)({},e),{},{loggedUser:n}))}}),Object(g.jsx)(S.b,{path:"/detalles/:id",render:function(e){return Object(g.jsx)(Q,Object(k.a)({},e))}}),Object(g.jsx)(S.b,{path:"/prueba-searchbar",render:function(){return Object(g.jsx)(p,{})}}),Object(g.jsx)(S.b,{path:"/prueba",render:function(){return Object(g.jsx)(Re,{})}}),n?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(S.b,{path:"/libros/:id",render:function(e){return Object(g.jsx)(se,Object(k.a)({},e))}}),Object(g.jsx)(S.b,{path:"/fragmentos/:id",render:function(e){return Object(g.jsx)(pe,Object(k.a)({},e))}}),Object(g.jsx)(S.b,{path:"/audios/:id",render:function(e){return Object(g.jsx)(E,Object(k.a)({},e))}}),Object(g.jsx)(S.b,{path:"/crear-audio/:fragmentId",render:function(e){return Object(g.jsx)(R,Object(k.a)(Object(k.a)({},e),{},{loggedUser:n}))}}),Object(g.jsx)(S.b,{path:"/crear-comentario/:audioId",render:function(e){return Object(g.jsx)(be,Object(k.a)(Object(k.a)({},e),{},{loggedUser:n}))}}),Object(g.jsx)(S.b,{path:"/crear-fragmento/:bookId",render:function(e){return Object(g.jsx)(Ne,Object(k.a)({},e))}}),Object(g.jsx)(S.b,{path:"/perfil",render:function(){return Object(g.jsx)(Ee,{loggedUser:n,storeUser:t})}})]}):Object(g.jsx)(S.a,{to:"/iniciar-sesion"})]})},Ge=(n(119),n(44)),Te=function(){return Object(g.jsxs)("footer",{className:"mt-5 d-flex justify-content-center",children:[Object(g.jsx)(Ge.SocialIcon,{bgColor:"white",className:"m-2",target:"_blank",network:"github",url:"https://github.com/davidmart16"}),Object(g.jsx)(Ge.SocialIcon,{bgColor:"white",className:"m-2",target:"_blank",network:"linkedin",url:"https://www.linkedin.com/in/david-martinez-perez-636456221"})]})},Je=new O;var He=function(){var e=Object(c.useState)(void 0),t=Object(i.a)(e,2),n=t[0],a=t[1];Object(c.useEffect)((function(){void 0===n&&Je.isloggedin().then((function(e){return r(e.data)})).catch((function(){return r(null)}))}),[n]);var r=function(e){return a(e)};return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(N,{loggedUser:n,storeUser:r}),Object(g.jsx)(Me,{loggedUser:n,storeUser:r}),Object(g.jsx)(Te,{})]})},Ze=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,136)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(g.jsxs)(j.a,{children:[Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(He,{})}),","]}),document.getElementById("root")),Ze()},67:function(e,t,n){},69:function(e,t,n){},89:function(e,t,n){}},[[125,1,2]]]);
//# sourceMappingURL=main.8e4fd80d.chunk.js.map